<!DOCTYPE html>
<html lang="en/US">
  <head>
    <meta charset="UTF-8" />
    <meta name="google" content="notranslate" />
    <meta content="text/html; charset=UTF-8" name="Content-Type" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Staged 3D Editor Demo</title>
    <style>
      html, body {
        width: 100%;
        height: 100%;
      }
      body {
        font-family: Clear Sans,Helvetica Neue,Arial,sans-serif;
        text-align: center;
        margin: 0 auto;
        background: var(--io-background-color);
      }
      io-color-panel {
        position: absolute;
        top: 0;
        left: 0;
        width: 200px; 
        height: 100px; 
      }
      io-color-slider-alpha {
        display: none;
      }
    </style>
    <!-- Import maps polyfill -->
    <!-- Remove this when import maps will be widely supported -->
    <script async src="https://unpkg.com/es-module-shims@1.5.4/dist/es-module-shims.js"></script>
    <script type="importmap">
      {
        "imports": {
          "three": "./node_modules/three/build/three.module.js",
          "three/": "./node_modules/three/",
          "io-gui": "./node_modules/io-gui/index.js",
          "io-gui-three-ui": "./node_modules/io-gui-three-ui/build/index.js",
          "io-gui-three-controls": "./node_modules/io-gui-three-controls/build/index.js"
        }
      }
    </script>
    <script type="module" src="./build/staged-editor.js"></script>
    <script type="module" src="./node_modules/io-gui/index.js"></script>
  </head>
  <body>
    <staged-editor></staged-editor>
    <io-color-panel></io-color-panel>
    <script type="module">
      import * as THREE from 'three';
      const editor = document.querySelector('staged-editor');
      editor.loadScene('scenes/tshirt_v7_blank.json');

      const colorPicker = document.querySelector('io-color-panel');
      colorPicker.value = [1, 1, 1];
      colorPicker.expanded = true;
      colorPicker.addEventListener('value-set', (event)=>{
        editor.setGarmentColor(
          event.detail.value[0],
          event.detail.value[1],
          event.detail.value[2]
        );
      })
    </script>
  </body>
</html>
